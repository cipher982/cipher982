{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Profile data schema for GitHub profile dashboard",
  "type": "object",
  "properties": {
    "generated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO8601 timestamp of data generation"
    },
    "github": {
      "type": "object",
      "properties": {
        "repos_active_7d": {"type": "integer"},
        "repos_active_30d": {"type": "integer"},
        "commits_7d": {"type": "integer"},
        "commits_30d": {"type": "integer"},
        "languages_30d": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "commits": {"type": "integer"}
            }
          }
        },
        "last_push": {
          "type": "object",
          "properties": {
            "repo": {"type": "string"},
            "timestamp": {"type": "string", "format": "date-time"},
            "hours_ago": {"type": "number"}
          }
        },
        "top_repos_7d": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "repo": {"type": "string"},
              "commits": {"type": "integer"}
            }
          }
        }
      }
    },
    "claude": {
      "type": "object",
      "properties": {
        "sessions_7d": {"type": "integer"},
        "sessions_30d": {"type": "integer"},
        "turns_7d": {"type": "integer"},
        "turns_30d": {"type": "integer"},
        "repos": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "repo": {"type": "string"},
              "sessions": {"type": "integer"},
              "turns": {"type": "integer"}
            }
          }
        },
        "last_session": {
          "type": "object",
          "properties": {
            "repo": {"type": "string"},
            "timestamp": {"type": "string", "format": "date-time"},
            "hours_ago": {"type": "number"}
          }
        }
      }
    },
    "codex": {
      "type": "object",
      "properties": {
        "sessions_7d": {"type": "integer"},
        "sessions_30d": {"type": "integer"},
        "turns_7d": {"type": "integer"},
        "turns_30d": {"type": "integer"},
        "repos": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "repo": {"type": "string"},
              "sessions": {"type": "integer"},
              "turns": {"type": "integer"}
            }
          }
        },
        "last_session": {
          "type": "object",
          "properties": {
            "repo": {"type": "string"},
            "timestamp": {"type": "string", "format": "date-time"},
            "hours_ago": {"type": "number"}
          }
        }
      }
    },
    "aggregate": {
      "type": "object",
      "properties": {
        "ai_sessions_7d": {"type": "integer"},
        "ai_turns_7d": {"type": "integer"},
        "claude_percentage": {"type": "number"},
        "codex_percentage": {"type": "number"},
        "top_repos_combined": {
          "type": "array",
          "description": "Top repos by combined git commits + AI sessions",
          "items": {
            "type": "object",
            "properties": {
              "repo": {"type": "string"},
              "commits": {"type": "integer"},
              "ai_sessions": {"type": "integer"},
              "activity_score": {"type": "number"}
            }
          }
        }
      }
    }
  },
  "required": ["generated_at", "github", "claude", "codex", "aggregate"]
}
